<launch version="0.1.1">
  <arg name="model"
    default="$(find-pkg-share aleph2_description)/urdf/aleph2_sim.urdf.xacro"
    description="Absolute path to robot urdf.xacro file" />
  <arg name="fixed" default="false"
    description='Set to "true" to spawn the robot fixed to the world' />
  <arg name="model_name" default="aleph2"
    description="The name of the spawned model in Gazebo" />

  <node pkg="robot_state_publisher" exec="robot_state_publisher">
    <param name="robot_description"
      value="$(command 'xacro $(var model) fixed:=$(var fixed)')" />
  </node>

  <node pkg="gazebo_ros" exec="spawn_entity.py"
    args="-topic robot_description -entity $(var model_name)" />

  <!-- Controllers -->
  
  <node name="joint_state_broadcaster_spawner"
    pkg="controller_manager"
    exec="spawner"
    args="joint_state_broadcaster" />

  <node name="diff_drive_controller_spawner"
    pkg="controller_manager"
    exec="spawner"
    args="diff_drive_controller" />
</launch>